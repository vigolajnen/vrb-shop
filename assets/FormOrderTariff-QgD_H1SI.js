import{j as e,r as N}from"./react-Jw3Yv3Dx.js";import{g as I}from"./react-router-uND8Us2t.js";import{u as g,a as R,F as E}from"./react-hook-form-arUvvm_T.js";import{c as f}from"./classnames-TNdf9gv5.js";import{F as s,R as G,a as T}from"./react-bootstrap-rlWHxisq.js";import{R as O}from"./react-input-mask-XmBdG83Q.js";import{i as V,m as z,a as B,b as A,v as M}from"./index-rdhOLfWB.js";import{L as _}from"./react-router-dom-IHdWotJk.js";import{u as Y,a as L,g as $}from"./useActions-3kPNohRi.js";import"./@remix-run-R0A6g4pJ.js";import"./@restart-xIeF-cHV.js";import"./dom-helpers--nlGJCCs.js";import"./@react-aria-T7pU4Vz_.js";import"./react-dom-KmRZywdm.js";import"./scheduler-iwWdm5Ml.js";import"./dequal-vEqHzq4I.js";import"./@popperjs-u7bcf535.js";import"./warning-A3mB0AEe.js";import"./uncontrollable-af-_F5Rh.js";import"./@babel-o_ZSNJgm.js";import"./react-transition-group-XCMw5D4t.js";import"./prop-types-owtuOFwk.js";import"./react-redux-z09SlkWR.js";import"./use-sync-external-store-rpec4DOT.js";import"./framer-motion-g-r5ZHJ9.js";import"./react-helmet-async-zKePrVHr.js";import"./react-fast-compare-PQr6UfN5.js";import"./invariant-LDHjVc5t.js";import"./shallowequal-ujSgULk1.js";import"./@reduxjs-MlIXepis.js";import"./redux-C6JyQ450.js";import"./immer-2oJgyI5v.js";import"./reselect-lfPQZHtp.js";import"./redux-thunk-qyK_zz9Y.js";const H="_label_dg7fw_1",J="_control_dg7fw_8",K="_stepper_dg7fw_19",Q="_stepperItem_dg7fw_40",U="_active_dg7fw_64",W="_labelCheck_dg7fw_72",X="_link_dg7fw_76",Z="_buttonNext_dg7fw_84",t={label:H,control:J,stepper:K,stepperItem:Q,active:U,labelCheck:W,link:X,buttonNext:Z},ee=()=>{const{register:r,formState:{errors:a}}=g();return e.jsxs(e.Fragment,{children:[e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{className:t.label,children:"Имя"}),e.jsx(s.Control,{type:"text",id:"first_name",placeholder:"Имя",className:t.control,...r("firstName",{required:!0,minLength:2})}),a.firstName&&e.jsx(s.Text,{className:"text-danger",children:"Пожалуйста, введите ваше имя"})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{className:t.label,children:"Номер телефона"}),e.jsx(O,{id:"phone",type:"tel",className:f(t.control,"form-control"),mask:"+7(999) 999-99-99",alwaysShowMask:!0,...r("phone",{validate:{inputTelRequired:V}})}),a.phone&&e.jsx(s.Text,{className:"text-danger",children:"Пожалуйста, введите ваш телефон"})]})]})},se=({data:r,item:a})=>{const n=z().toString(),o=B().toString(),{register:m,formState:{errors:c}}=g();return e.jsxs(e.Fragment,{children:[e.jsxs(G,{children:[e.jsx(T,{xs:12,sm:6,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{className:t.label,children:"Имя"}),e.jsx(s.Control,{type:"text",name:"first_name",placeholder:"Имя",id:"firstName",value:r.firstName,readOnly:!0,className:t.control})]})}),e.jsx(T,{xs:12,sm:6,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{className:t.label,children:"Фамилия"}),e.jsx(s.Control,{type:"text",placeholder:"Фамилия",className:t.control,id:"lastName",required:!0,...m("lastName",{required:!0,minLength:2})}),c.lastName&&e.jsx(s.Text,{className:"text-danger",children:"Пожалуйста, введите вашу фамилию"})]})})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{className:t.label,children:"Выберите клуб"}),e.jsxs(s.Select,{"aria-label":"Выберите клуб",className:t.control,required:!0,...m("club_id",{required:!0}),children:[e.jsx("option",{value:"",children:"Выберете клуб"}),(a==null?void 0:a.clubs.length)>0?[...a.clubs].map(d=>e.jsx("option",{value:d.id,children:d.address},d.address)):null]}),c.club_id&&e.jsx(s.Text,{className:"text-danger",children:"Пожалуйста, выберите клуб"})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{className:t.label,children:"Номер телефона"}),e.jsx(s.Control,{type:"tel",name:"phone",className:t.control,id:"phone",value:r.phone,readOnly:!0})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{className:t.label,children:"Дата рождения"}),e.jsx(s.Control,{type:"date",className:t.control,id:"customer_birth_day",min:o,max:n,required:!0,...m("birth_day",{required:!0,min:o,max:n,validate:{inputBirthDayRequired:A}})}),c.birth_day&&e.jsx(s.Text,{className:"text-danger",children:"Пожалуйста, введите вашу дату рождения"})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{className:t.label,children:"Email"}),e.jsx(s.Control,{type:"email",placeholder:"Email",className:t.control,id:"email",required:!0,...m("email",{required:!0,validate:{inputEmailRequired:M}})}),c.email&&e.jsx(s.Text,{className:"text-danger",children:"Пожалуйста, введите ваш email"})]})]})},te="_list_doqzv_1",re="_item_doqzv_8",ae="_text_doqzv_15",p={list:te,item:re,text:ae},le=({price:r,club:a})=>{const n=a.first_pay[0].product_price,o=+r+ +n;return e.jsxs("div",{className:"p-2",children:[e.jsxs("ul",{className:p.list,children:[e.jsxs("li",{className:p.item,children:[e.jsx("span",{children:"Стоимость тарифа"}),e.jsxs("span",{children:[e.jsx("b",{children:r})," ",e.jsx("small",{children:"₽"})]})]}),e.jsxs("li",{className:p.item,children:[e.jsx("span",{children:"Первоначальный платеж"}),e.jsxs("span",{children:[e.jsx("b",{children:n})," ",e.jsx("small",{children:"₽"})]})]}),e.jsxs("li",{className:p.item,children:[e.jsxs("span",{children:[e.jsx("b",{children:"Итого:"}),e.jsx("br",{}),"к оплате за первый месяц"]}),e.jsxs("span",{children:[e.jsx("b",{children:o})," ",e.jsx("small",{children:"₽"})]})]})]}),e.jsxs("p",{className:p.text,children:["Ежемесячное списание Подписки со второго месяца будет равно стоимости Вашего тарифа ",r," ₽"]})]})};function ie({price:r,club:a}){return e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(le,{price:r,club:a})})}const ne=()=>{const{register:r,formState:{errors:a}}=g();return e.jsx(e.Fragment,{children:e.jsxs(s.Check,{type:"checkbox",id:"checkbox",children:[e.jsx(s.Check.Input,{type:"checkbox",...r("isCheck",{required:!0})}),e.jsxs(s.Check.Label,{className:t.labelCheck,children:["Я ознакомлен(-на) и согласен(-на) с условиями"," ",e.jsx(_,{to:"/",className:t.link,target:"_blank",rel:"noreferrer",children:"Договора Оферты"}),","," ",e.jsx(_,{to:"/",className:t.link,target:"_blank",rel:"noreferrer",children:"Правилами Клуба"})," ","и даю своё согласие на"," ",e.jsx(_,{to:"/",className:t.link,target:"_blank",rel:"noreferrer",children:"обработку персональных данных"}),"."]}),a.isCheck&&e.jsx(s.Text,{className:"text-danger",children:"error isCheck "})]})})},F={firstName:"",lastName:"",phone:"",email:"",birth_day:"",club_id:"",isCheck:!1},ce=({item:r})=>{const[a,n]=N.useState(!1),{getProductsPosition:o,getClubsPositions:m,getProductsPositionFirstPay:c,getFormData:d,getCustomer:k}=Y(),{orderData:y}=L(i=>i.form),h=[1,2,3],[l,u]=N.useState(1),[j,x]=N.useState(F),v=R({mode:"all"}),{formState:{isValid:C},watch:b,reset:q}=v,w=()=>{u(i=>i+1)},D=i=>{i=b(),x(i),w(),d(b())},S=i=>{i=b(),d(b()),k(),m(r.clubs),o(r),c(i.club_id),n(!0),setTimeout(()=>{console.log("orderData",y),q(),u(1),n(!1)},1e3),x(F)};N.useEffect(()=>{},[]);const P=()=>l>2?null:l===2?e.jsx("button",{type:"button",className:f(t.buttonNext,"w-100 my-2 mb-4 p-3"),onClick:S,disabled:!C,children:"Оплатить"}):e.jsx("button",{type:"button",onClick:D,className:f(t.buttonNext,"w-100 my-2 mb-4 p-3"),disabled:!C,children:"Далее"});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.stepper,children:h.map(i=>e.jsx("div",{className:i<=l?f(t.stepperItem,t.active):t.stepperItem,children:e.jsx("span",{children:i})},i))}),e.jsx(E,{...v,children:e.jsxs(s,{noValidate:!0,validated:a,onSubmit:S,children:[l>=1&&e.jsx("div",{className:l===1?"":"d-none",children:e.jsx(ee,{})}),l>=2&&e.jsx("div",{className:l===2?"":"d-none",children:e.jsx(se,{data:j,item:r})}),l>=2&&e.jsx("div",{className:l===2?"":"d-none",children:e.jsx(ie,{price:r.price,club:r.clubs[0]})}),P(),l<=2&&e.jsx("div",{className:l===2||l===1?"":"d-none",children:e.jsx(ne,{})})]})})]})},Me=()=>{var j;const r=I(),{clubsPoolYes:a,clubsPoolNo:n,clubsPremiere:o,tariffTypes:m,tariffsTabs:c,tariffsActiveTab:d}=L(x=>x.price),h=[{tab:c[0],list:o},{tab:c[1],list:a},{tab:c[2],list:n}].filter(x=>x.tab===d)[0].list,l=[];h.length>0&&l.push($(h,m));const u=(j=l.flat(1))==null?void 0:j.find(x=>x.id===Number(r.id));return e.jsx(ce,{item:u})};export{Me as default};
