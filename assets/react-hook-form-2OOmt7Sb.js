import{R as L}from"./react-IgOIl9ry.js";var le=e=>e.type==="checkbox",te=e=>e instanceof Date,C=e=>e==null;const et=e=>typeof e=="object";var S=e=>!C(e)&&!Array.isArray(e)&&et(e)&&!te(e),vt=e=>S(e)&&e.target?le(e.target)?e.target.checked:e.target.value:e,_t=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,bt=(e,u)=>e.has(_t(u)),Vt=e=>{const u=e.constructor&&e.constructor.prototype;return S(u)&&u.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function K(e){let u;const s=Array.isArray(e);if(e instanceof Date)u=new Date(e);else if(e instanceof Set)u=new Set(e);else if(!(Te&&(e instanceof Blob||e instanceof FileList))&&(s||S(e)))if(u=s?[]:{},!s&&!Vt(e))u=e;else for(const r in e)e.hasOwnProperty(r)&&(u[r]=K(e[r]));else return e;return u}var ae=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,y=(e,u,s)=>{if(!u||!S(e))return s;const r=ae(u.split(/[,[\].]+?/)).reduce((a,l)=>C(a)?a:a[l],e);return D(r)||r===e?D(e[u])?s:e[u]:r},j=e=>typeof e=="boolean";const Ke={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},P={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},tt=L.createContext(null),Pt=()=>L.useContext(tt),It=e=>{const{children:u,...s}=e;return L.createElement(tt.Provider,{value:s},u)};var At=(e,u,s,r=!0)=>{const a={defaultValues:u._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const c=l;return u._proxyFormState[c]!==P.all&&(u._proxyFormState[c]=!r||P.all),s&&(s[c]=!0),e[c]}});return a},U=e=>S(e)&&!Object.keys(e).length,Ft=(e,u,s,r)=>{s(e);const{name:a,...l}=e;return U(l)||Object.keys(l).length>=Object.keys(u).length||Object.keys(l).find(c=>u[c]===(!r||P.all))},ke=e=>Array.isArray(e)?e:[e];function xt(e){const u=L.useRef(e);u.current=e,L.useEffect(()=>{const s=!e.disabled&&u.current.subject&&u.current.subject.subscribe({next:u.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var H=e=>typeof e=="string",wt=(e,u,s,r,a)=>H(e)?(r&&u.watch.add(e),y(s,e,a)):Array.isArray(e)?e.map(l=>(r&&u.watch.add(l),y(s,l))):(r&&(u.watchAll=!0),s),Ce=e=>/^\w*$/.test(e),rt=e=>ae(e.replace(/["|']|\]/g,"").split(/\.|\[/)),w=(e,u,s)=>{let r=-1;const a=Ce(u)?[u]:rt(u),l=a.length,c=l-1;for(;++r<l;){const b=a[r];let V=s;if(r!==c){const p=e[b];V=S(p)||Array.isArray(p)?p:isNaN(+a[r+1])?{}:[]}e[b]=V,e=e[b]}return e},Dt=(e,u,s,r,a)=>u?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[r]:a||!0}}:{},je=e=>({isOnSubmit:!e||e===P.onSubmit,isOnBlur:e===P.onBlur,isOnChange:e===P.onChange,isOnAll:e===P.all,isOnTouch:e===P.onTouched}),ze=(e,u,s)=>!s&&(u.watchAll||u.watch.has(e)||[...u.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const ne=(e,u,s,r)=>{for(const a of s||Object.keys(e)){const l=y(e,a);if(l){const{_f:c,...b}=l;if(c){if(c.refs&&c.refs[0]&&u(c.refs[0],a)&&!r)break;if(c.ref&&u(c.ref,c.name)&&!r)break;ne(b,u)}else S(b)&&ne(b,u)}}};var kt=(e,u,s)=>{const r=ae(y(e,s));return w(r,"root",u[s]),w(e,s,r),e},Le=e=>e.type==="file",G=e=>typeof e=="function",he=e=>{if(!Te)return!1;const u=e?e.ownerDocument:0;return e instanceof(u&&u.defaultView?u.defaultView.HTMLElement:HTMLElement)},ye=e=>H(e),pe=e=>e.type==="radio",ge=e=>e instanceof RegExp;const Ge={value:!1,isValid:!1},Je={value:!0,isValid:!0};var st=e=>{if(Array.isArray(e)){if(e.length>1){const u=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:u,isValid:!!u.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?Je:{value:e[0].value,isValid:!0}:Je:Ge}return Ge};const Qe={isValid:!1,value:null};var it=e=>Array.isArray(e)?e.reduce((u,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:u,Qe):Qe;function Xe(e,u,s="validate"){if(ye(e)||Array.isArray(e)&&e.every(ye)||j(e)&&!e)return{type:s,message:ye(e)?e:"",ref:u}}var ee=e=>S(e)&&!ge(e)?e:{value:e,message:""},Ye=async(e,u,s,r,a)=>{const{ref:l,refs:c,required:b,maxLength:V,minLength:p,min:X,max:k,pattern:_,validate:z,name:R,valueAsNumber:be,mount:oe,disabled:Ve}=e._f,g=y(u,R);if(!oe||Ve)return{};const M=c?c[0]:l,W=v=>{r&&M.reportValidity&&(M.setCustomValidity(j(v)?"":v||""),M.reportValidity())},m={},fe=pe(l),re=le(l),se=fe||re,Y=(be||Le(l))&&D(l.value)&&D(g)||he(l)&&l.value===""||g===""||Array.isArray(g)&&!g.length,N=Dt.bind(null,R,s,m),ce=(v,A,x,T=$.maxLength,I=$.minLength)=>{const B=v?A:x;m[R]={type:v?T:I,message:B,ref:l,...N(v?T:I,B)}};if(a?!Array.isArray(g)||!g.length:b&&(!se&&(Y||C(g))||j(g)&&!g||re&&!st(c).isValid||fe&&!it(c).isValid)){const{value:v,message:A}=ye(b)?{value:!!b,message:b}:ee(b);if(v&&(m[R]={type:$.required,message:A,ref:M,...N($.required,A)},!s))return W(A),m}if(!Y&&(!C(X)||!C(k))){let v,A;const x=ee(k),T=ee(X);if(!C(g)&&!isNaN(g)){const I=l.valueAsNumber||g&&+g;C(x.value)||(v=I>x.value),C(T.value)||(A=I<T.value)}else{const I=l.valueAsDate||new Date(g),B=de=>new Date(new Date().toDateString()+" "+de),ie=l.type=="time",J=l.type=="week";H(x.value)&&g&&(v=ie?B(g)>B(x.value):J?g>x.value:I>new Date(x.value)),H(T.value)&&g&&(A=ie?B(g)<B(T.value):J?g<T.value:I<new Date(T.value))}if((v||A)&&(ce(!!v,x.message,T.message,$.max,$.min),!s))return W(m[R].message),m}if((V||p)&&!Y&&(H(g)||a&&Array.isArray(g))){const v=ee(V),A=ee(p),x=!C(v.value)&&g.length>+v.value,T=!C(A.value)&&g.length<+A.value;if((x||T)&&(ce(x,v.message,A.message),!s))return W(m[R].message),m}if(_&&!Y&&H(g)){const{value:v,message:A}=ee(_);if(ge(v)&&!g.match(v)&&(m[R]={type:$.pattern,message:A,ref:l,...N($.pattern,A)},!s))return W(A),m}if(z){if(G(z)){const v=await z(g,u),A=Xe(v,M);if(A&&(m[R]={...A,...N($.validate,A.message)},!s))return W(A.message),m}else if(S(z)){let v={};for(const A in z){if(!U(v)&&!s)break;const x=Xe(await z[A](g,u),M,A);x&&(v={...x,...N(A,x.message)},W(x.message),s&&(m[R]=v))}if(!U(v)&&(m[R]={ref:M,...v},!s))return m}}return W(!0),m};function St(e,u){const s=u.slice(0,-1).length;let r=0;for(;r<s;)e=D(e)?r++:e[u[r++]];return e}function mt(e){for(const u in e)if(e.hasOwnProperty(u)&&!D(e[u]))return!1;return!0}function O(e,u){const s=Array.isArray(u)?u:Ce(u)?[u]:rt(u),r=s.length===1?e:St(e,s),a=s.length-1,l=s[a];return r&&delete r[l],a!==0&&(S(r)&&U(r)||Array.isArray(r)&&mt(r))&&O(e,s.slice(0,-1)),e}var Se=()=>{let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next&&l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}},ve=e=>C(e)||!et(e);function Q(e,u){if(ve(e)||ve(u))return e===u;if(te(e)&&te(u))return e.getTime()===u.getTime();const s=Object.keys(e),r=Object.keys(u);if(s.length!==r.length)return!1;for(const a of s){const l=e[a];if(!r.includes(a))return!1;if(a!=="ref"){const c=u[a];if(te(l)&&te(c)||S(l)&&S(c)||Array.isArray(l)&&Array.isArray(c)?!Q(l,c):l!==c)return!1}}return!0}var ut=e=>e.type==="select-multiple",Et=e=>pe(e)||le(e),me=e=>he(e)&&e.isConnected,nt=e=>{for(const u in e)if(G(e[u]))return!0;return!1};function _e(e,u={}){const s=Array.isArray(e);if(S(e)||s)for(const r in e)Array.isArray(e[r])||S(e[r])&&!nt(e[r])?(u[r]=Array.isArray(e[r])?[]:{},_e(e[r],u[r])):C(e[r])||(u[r]=!0);return u}function lt(e,u,s){const r=Array.isArray(e);if(S(e)||r)for(const a in e)Array.isArray(e[a])||S(e[a])&&!nt(e[a])?D(u)||ve(s[a])?s[a]=Array.isArray(e[a])?_e(e[a],[]):{..._e(e[a])}:lt(e[a],C(u)?{}:u[a],s[a]):s[a]=!Q(e[a],u[a]);return s}var Ee=(e,u)=>lt(e,u,_e(u)),at=(e,{valueAsNumber:u,valueAsDate:s,setValueAs:r})=>D(e)?e:u?e===""?NaN:e&&+e:s&&H(e)?new Date(e):r?r(e):e;function Oe(e){const u=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):u.disabled))return Le(u)?u.files:pe(u)?it(e.refs).value:ut(u)?[...u.selectedOptions].map(({value:s})=>s):le(u)?st(e.refs).value:at(D(u.value)?e.ref.value:u.value,e)}var Ot=(e,u,s,r)=>{const a={};for(const l of e){const c=y(u,l);c&&w(a,l,c._f)}return{criteriaMode:s,names:[...e],fields:a,shouldUseNativeValidation:r}},ue=e=>D(e)?e:ge(e)?e.source:S(e)?ge(e.value)?e.value.source:e.value:e,Tt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Ze(e,u,s){const r=y(e,s);if(r||Ce(s))return{error:r,name:s};const a=s.split(".");for(;a.length;){const l=a.join("."),c=y(u,l),b=y(e,l);if(c&&!Array.isArray(c)&&s!==l)return{name:s};if(b&&b.type)return{name:l,error:b};a.pop()}return{name:s}}var Ct=(e,u,s,r,a)=>a.isOnAll?!1:!s&&a.isOnTouch?!(u||e):(s?r.isOnBlur:a.isOnBlur)?!e:(s?r.isOnChange:a.isOnChange)?e:!0,Lt=(e,u)=>!ae(y(e,u)).length&&O(e,u);const pt={mode:P.onSubmit,reValidateMode:P.onChange,shouldFocusError:!0};function Rt(e={},u){let s={...pt,...e},r={submitCount:0,isDirty:!1,isLoading:G(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:s.errors||{},disabled:!1},a={},l=S(s.defaultValues)||S(s.values)?K(s.defaultValues||s.values)||{}:{},c=s.shouldUnregister?{}:K(l),b={action:!1,mount:!1,watch:!1},V={mount:new Set,unMount:new Set,array:new Set,watch:new Set},p,X=0;const k={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={values:Se(),array:Se(),state:Se()},z=e.resetOptions&&e.resetOptions.keepDirtyValues,R=je(s.mode),be=je(s.reValidateMode),oe=s.criteriaMode===P.all,Ve=t=>i=>{clearTimeout(X),X=setTimeout(t,i)},g=async t=>{if(k.isValid||t){const i=s.resolver?U((await N()).errors):await v(a,!0);i!==r.isValid&&_.state.next({isValid:i})}},M=t=>k.isValidating&&_.state.next({isValidating:t}),W=(t,i=[],n,d,f=!0,o=!0)=>{if(d&&n){if(b.action=!0,o&&Array.isArray(y(a,t))){const h=n(y(a,t),d.argA,d.argB);f&&w(a,t,h)}if(o&&Array.isArray(y(r.errors,t))){const h=n(y(r.errors,t),d.argA,d.argB);f&&w(r.errors,t,h),Lt(r.errors,t)}if(k.touchedFields&&o&&Array.isArray(y(r.touchedFields,t))){const h=n(y(r.touchedFields,t),d.argA,d.argB);f&&w(r.touchedFields,t,h)}k.dirtyFields&&(r.dirtyFields=Ee(l,c)),_.state.next({name:t,isDirty:x(t,i),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else w(c,t,i)},m=(t,i)=>{w(r.errors,t,i),_.state.next({errors:r.errors})},fe=t=>{r.errors=t,_.state.next({errors:r.errors,isValid:!1})},re=(t,i,n,d)=>{const f=y(a,t);if(f){const o=y(c,t,D(n)?y(l,t):n);D(o)||d&&d.defaultChecked||i?w(c,t,i?o:Oe(f._f)):B(t,o),b.mount&&g()}},se=(t,i,n,d,f)=>{let o=!1,h=!1;const F={name:t},E=!!(y(a,t)&&y(a,t)._f.disabled);if(!n||d){k.isDirty&&(h=r.isDirty,r.isDirty=F.isDirty=x(),o=h!==F.isDirty);const q=E||Q(y(l,t),i);h=!!(!E&&y(r.dirtyFields,t)),q||E?O(r.dirtyFields,t):w(r.dirtyFields,t,!0),F.dirtyFields=r.dirtyFields,o=o||k.dirtyFields&&h!==!q}if(n){const q=y(r.touchedFields,t);q||(w(r.touchedFields,t,n),F.touchedFields=r.touchedFields,o=o||k.touchedFields&&q!==n)}return o&&f&&_.state.next(F),o?F:{}},Y=(t,i,n,d)=>{const f=y(r.errors,t),o=k.isValid&&j(i)&&r.isValid!==i;if(e.delayError&&n?(p=Ve(()=>m(t,n)),p(e.delayError)):(clearTimeout(X),p=null,n?w(r.errors,t,n):O(r.errors,t)),(n?!Q(f,n):f)||!U(d)||o){const h={...d,...o&&j(i)?{isValid:i}:{},errors:r.errors,name:t};r={...r,...h},_.state.next(h)}M(!1)},N=async t=>s.resolver(c,s.context,Ot(t||V.mount,a,s.criteriaMode,s.shouldUseNativeValidation)),ce=async t=>{const{errors:i}=await N(t);if(t)for(const n of t){const d=y(i,n);d?w(r.errors,n,d):O(r.errors,n)}else r.errors=i;return i},v=async(t,i,n={valid:!0})=>{for(const d in t){const f=t[d];if(f){const{_f:o,...h}=f;if(o){const F=V.array.has(o.name),E=await Ye(f,c,oe,s.shouldUseNativeValidation&&!i,F);if(E[o.name]&&(n.valid=!1,i))break;!i&&(y(E,o.name)?F?kt(r.errors,E,o.name):w(r.errors,o.name,E[o.name]):O(r.errors,o.name))}h&&await v(h,i,n)}}return n.valid},A=()=>{for(const t of V.unMount){const i=y(a,t);i&&(i._f.refs?i._f.refs.every(n=>!me(n)):!me(i._f.ref))&&Fe(t)}V.unMount=new Set},x=(t,i)=>(t&&i&&w(c,t,i),!Q(Ue(),l)),T=(t,i,n)=>wt(t,V,{...b.mount?c:D(i)?l:H(t)?{[t]:i}:i},n,i),I=t=>ae(y(b.mount?c:l,t,e.shouldUnregister?y(l,t,[]):[])),B=(t,i,n={})=>{const d=y(a,t);let f=i;if(d){const o=d._f;o&&(!o.disabled&&w(c,t,at(i,o)),f=he(o.ref)&&C(i)?"":i,ut(o.ref)?[...o.ref.options].forEach(h=>h.selected=f.includes(h.value)):o.refs?le(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(f)?!!f.find(F=>F===h.value):f===h.value)):o.refs[0]&&(o.refs[0].checked=!!f):o.refs.forEach(h=>h.checked=h.value===f):Le(o.ref)?o.ref.value="":(o.ref.value=f,o.ref.type||_.values.next({name:t,values:{...c}})))}(n.shouldDirty||n.shouldTouch)&&se(t,f,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&Ae(t)},ie=(t,i,n)=>{for(const d in i){const f=i[d],o=`${t}.${d}`,h=y(a,o);(V.array.has(t)||!ve(f)||h&&!h._f)&&!te(f)?ie(o,f,n):B(o,f,n)}},J=(t,i,n={})=>{const d=y(a,t),f=V.array.has(t),o=K(i);w(c,t,o),f?(_.array.next({name:t,values:{...c}}),(k.isDirty||k.dirtyFields)&&n.shouldDirty&&_.state.next({name:t,dirtyFields:Ee(l,c),isDirty:x(t,o)})):d&&!d._f&&!C(o)?ie(t,o,n):B(t,o,n),ze(t,V)&&_.state.next({...r}),_.values.next({name:t,values:{...c}}),!b.mount&&u()},de=async t=>{const i=t.target;let n=i.name,d=!0;const f=y(a,n),o=()=>i.type?Oe(f._f):vt(t),h=F=>{d=Number.isNaN(F)||F===y(c,n,F)};if(f){let F,E;const q=o(),Z=t.type===Ke.BLUR||t.type===Ke.FOCUS_OUT,yt=!Tt(f._f)&&!s.resolver&&!y(r.errors,n)&&!f._f.deps||Ct(Z,y(r.touchedFields,n),r.isSubmitted,be,R),we=ze(n,V,Z);w(c,n,q),Z?(f._f.onBlur&&f._f.onBlur(t),p&&p(0)):f._f.onChange&&f._f.onChange(t);const De=se(n,q,Z,!1),ht=!U(De)||we;if(!Z&&_.values.next({name:n,type:t.type,values:{...c}}),yt)return k.isValid&&g(),ht&&_.state.next({name:n,...we?{}:De});if(!Z&&we&&_.state.next({...r}),M(!0),s.resolver){const{errors:We}=await N([n]);if(h(q),d){const gt=Ze(r.errors,a,n),$e=Ze(We,a,gt.name||n);F=$e.error,n=$e.name,E=U(We)}}else F=(await Ye(f,c,oe,s.shouldUseNativeValidation))[n],h(q),d&&(F?E=!1:k.isValid&&(E=await v(a,!0)));d&&(f._f.deps&&Ae(f._f.deps),Y(n,E,F,De))}},Re=(t,i)=>{if(y(r.errors,i)&&t.focus)return t.focus(),1},Ae=async(t,i={})=>{let n,d;const f=ke(t);if(M(!0),s.resolver){const o=await ce(D(t)?t:f);n=U(o),d=t?!f.some(h=>y(o,h)):n}else t?(d=(await Promise.all(f.map(async o=>{const h=y(a,o);return await v(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!d&&!r.isValid)&&g()):d=n=await v(a);return _.state.next({...!H(t)||k.isValid&&n!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:n}:{},errors:r.errors,isValidating:!1}),i.shouldFocus&&!d&&ne(a,Re,t?f:V.mount),d},Ue=t=>{const i={...l,...b.mount?c:{}};return D(t)?i:H(t)?y(i,t):t.map(n=>y(i,n))},Me=(t,i)=>({invalid:!!y((i||r).errors,t),isDirty:!!y((i||r).dirtyFields,t),isTouched:!!y((i||r).touchedFields,t),error:y((i||r).errors,t)}),ot=t=>{t&&ke(t).forEach(i=>O(r.errors,i)),_.state.next({errors:t?r.errors:{}})},Ne=(t,i,n)=>{const d=(y(a,t,{_f:{}})._f||{}).ref;w(r.errors,t,{...i,ref:d}),_.state.next({name:t,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&d&&d.focus&&d.focus()},ft=(t,i)=>G(t)?_.values.subscribe({next:n=>t(T(void 0,i),n)}):T(t,i,!0),Fe=(t,i={})=>{for(const n of t?ke(t):V.mount)V.mount.delete(n),V.array.delete(n),i.keepValue||(O(a,n),O(c,n)),!i.keepError&&O(r.errors,n),!i.keepDirty&&O(r.dirtyFields,n),!i.keepTouched&&O(r.touchedFields,n),!s.shouldUnregister&&!i.keepDefaultValue&&O(l,n);_.values.next({values:{...c}}),_.state.next({...r,...i.keepDirty?{isDirty:x()}:{}}),!i.keepIsValid&&g()},Be=({disabled:t,name:i,field:n,fields:d,value:f})=>{if(j(t)){const o=t?void 0:D(f)?Oe(n?n._f:y(d,i)._f):f;w(c,i,o),se(i,o,!1,!1,!0)}},xe=(t,i={})=>{let n=y(a,t);const d=j(i.disabled);return w(a,t,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:t}},name:t,mount:!0,...i}}),V.mount.add(t),n?Be({field:n,disabled:i.disabled,name:t,value:i.value}):re(t,!0,i.value),{...d?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:ue(i.min),max:ue(i.max),minLength:ue(i.minLength),maxLength:ue(i.maxLength),pattern:ue(i.pattern)}:{},name:t,onChange:de,onBlur:de,ref:f=>{if(f){xe(t,i),n=y(a,t);const o=D(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,h=Et(o),F=n._f.refs||[];if(h?F.find(E=>E===o):o===n._f.ref)return;w(a,t,{_f:{...n._f,...h?{refs:[...F.filter(me),o,...Array.isArray(y(l,t))?[{}]:[]],ref:{type:o.type,name:t}}:{ref:o}}}),re(t,!1,void 0,o)}else n=y(a,t,{}),n._f&&(n._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(bt(V.array,t)&&b.action)&&V.unMount.add(t)}}},Pe=()=>s.shouldFocusError&&ne(a,Re,V.mount),ct=t=>{j(t)&&(_.state.next({disabled:t}),ne(a,(i,n)=>{let d=t;const f=y(a,n);f&&j(f._f.disabled)&&(d||(d=f._f.disabled)),i.disabled=d},0,!1))},Ie=(t,i)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let d=K(c);if(_.state.next({isSubmitting:!0}),s.resolver){const{errors:f,values:o}=await N();r.errors=f,d=o}else await v(a);O(r.errors,"root"),U(r.errors)?(_.state.next({errors:{}}),await t(d,n)):(i&&await i({...r.errors},n),Pe(),setTimeout(Pe)),_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:U(r.errors),submitCount:r.submitCount+1,errors:r.errors})},dt=(t,i={})=>{y(a,t)&&(D(i.defaultValue)?J(t,y(l,t)):(J(t,i.defaultValue),w(l,t,i.defaultValue)),i.keepTouched||O(r.touchedFields,t),i.keepDirty||(O(r.dirtyFields,t),r.isDirty=i.defaultValue?x(t,y(l,t)):x()),i.keepError||(O(r.errors,t),k.isValid&&g()),_.state.next({...r}))},qe=(t,i={})=>{const n=t?K(t):l,d=K(n),f=t&&!U(t)?d:l;if(i.keepDefaultValues||(l=n),!i.keepValues){if(i.keepDirtyValues||z)for(const o of V.mount)y(r.dirtyFields,o)?w(f,o,y(c,o)):J(o,y(f,o));else{if(Te&&D(t))for(const o of V.mount){const h=y(a,o);if(h&&h._f){const F=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;if(he(F)){const E=F.closest("form");if(E){E.reset();break}}}}a={}}c=e.shouldUnregister?i.keepDefaultValues?K(l):{}:K(f),_.array.next({values:{...f}}),_.values.next({values:{...f}})}V={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!b.mount&&u(),b.mount=!k.isValid||!!i.keepIsValid,b.watch=!!e.shouldUnregister,_.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:i.keepDirty?r.isDirty:!!(i.keepDefaultValues&&!Q(t,l)),isSubmitted:i.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:i.keepDirtyValues?r.dirtyFields:i.keepDefaultValues&&t?Ee(l,t):{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},He=(t,i)=>qe(G(t)?t(c):t,i);return{control:{register:xe,unregister:Fe,getFieldState:Me,handleSubmit:Ie,setError:Ne,_executeSchema:N,_getWatch:T,_getDirty:x,_updateValid:g,_removeUnmounted:A,_updateFieldArray:W,_updateDisabledField:Be,_getFieldArray:I,_reset:qe,_resetDefaultValues:()=>G(s.defaultValues)&&s.defaultValues().then(t=>{He(t,s.resetOptions),_.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:ct,_subjects:_,_proxyFormState:k,_setErrors:fe,get _fields(){return a},get _formValues(){return c},get _state(){return b},set _state(t){b=t},get _defaultValues(){return l},get _names(){return V},set _names(t){V=t},get _formState(){return r},set _formState(t){r=t},get _options(){return s},set _options(t){s={...s,...t}}},trigger:Ae,register:xe,handleSubmit:Ie,watch:ft,setValue:J,getValues:Ue,reset:He,resetField:dt,clearErrors:ot,unregister:Fe,setError:Ne,setFocus:(t,i={})=>{const n=y(a,t),d=n&&n._f;if(d){const f=d.refs?d.refs[0]:d.ref;f.focus&&(f.focus(),i.shouldSelect&&f.select())}},getFieldState:Me}}function qt(e={}){const u=L.useRef(),s=L.useRef(),[r,a]=L.useState({isDirty:!1,isValidating:!1,isLoading:G(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:!1,defaultValues:G(e.defaultValues)?void 0:e.defaultValues});u.current||(u.current={...Rt(e,()=>a(c=>({...c}))),formState:r});const l=u.current.control;return l._options=e,xt({subject:l._subjects.state,next:c=>{Ft(c,l._proxyFormState,l._updateFormState,!0)&&a({...l._formState})}}),L.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),L.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==r.isDirty&&l._subjects.state.next({isDirty:c})}},[l,r.isDirty]),L.useEffect(()=>{e.values&&!Q(e.values,s.current)?(l._reset(e.values,l._options.resetOptions),s.current=e.values,a(c=>({...c}))):l._resetDefaultValues()},[e.values,l]),L.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),L.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),u.current.formState=At(r,l),u.current}export{It as F,qt as a,Pt as u};
